*** Begin Patch
*** Begin Patch
*** Update File: client/src/pages/MaintenancePlanner.tsx
@@
-const MAINTENANCE_FREQUENCIES = ["Monthly", "Quarterly", "Half Yearly", "Yearly"];
+const MAINTENANCE_FREQUENCIES = ["Monthly", "Quarterly", "Half Yearly", "Yearly"];
+
+const DEFAULT_EMAIL_TEMPLATE = `Hello,
+
+This is a reminder that {{machineName}}{{machineCodeFormatted}} on line {{lineName}} has maintenance scheduled on {{scheduledDate}}.
+
+Maintenance frequency: {{maintenanceFrequency}}
+Notes: {{notes}}
+
+Regards,
+Maintenance Team`;
@@
 interface Schedule {
   id: string;
   machineId: string;
   scheduledDate: string;
   status: string;
   maintenanceFrequency?: string | null;
   notes?: string | null;
   preNotificationSent: boolean;
   createdAt?: string | null;
   updatedAt?: string | null;
   completedAt?: string | null;
   machineName?: string | null;
   machineCode?: string | null;
   lineName?: string | null;
+  emailRecipients?: string | null;
+  emailTemplate?: string | null;
 }
 
 const defaultFormState = {
   machineId: "",
   scheduledDate: "",
   maintenanceFrequency: "Monthly",
-  notes: "",
+  notes: "",
+  emailRecipients: "",
+  emailTemplate: DEFAULT_EMAIL_TEMPLATE,
 };
*** End Patch
*** Begin Patch
*** Update File: client/src/pages/MaintenancePlanner.tsx
@@
           </div>
 
           <div className="space-y-2">
             <Label htmlFor="planner-frequency">Maintenance Frequency</Label>
             <Select
               value={form.maintenanceFrequency || "none"}
               onValueChange={(value) =>
                 setForm((prev) => ({ ...prev, maintenanceFrequency: value === "none" ? "" : value }))
               }
             >
               <SelectTrigger id="planner-frequency" data-testid="select-planner-frequency">
                 <SelectValue placeholder="Select frequency (optional)" />
               </SelectTrigger>
               <SelectContent>
                 {MAINTENANCE_FREQUENCIES.map((option) => (
                   <SelectItem key={option} value={option}>
                     {option}
                   </SelectItem>
                 ))}
                 <SelectItem value="none">Not Specified</SelectItem>
               </SelectContent>
             </Select>
           </div>
+
+          <div className="space-y-2">
+            <Label htmlFor="planner-recipients">Email Recipients</Label>
+            <Textarea
+              id="planner-recipients"
+              value={form.emailRecipients}
+              onChange={(event) =>
+                setForm((prev) => ({ ...prev, emailRecipients: event.target.value }))
+              }
+              placeholder="Enter recipient emails separated by commas"
+              rows={2}
+              data-testid="textarea-planner-recipients"
+            />
+          </div>
+
+          <div className="space-y-2 md:col-span-2">
+            <Label htmlFor="planner-template">Email Template</Label>
+            <Textarea
+              id="planner-template"
+              value={form.emailTemplate}
+              onChange={(event) =>
+                setForm((prev) => ({ ...prev, emailTemplate: event.target.value }))
+              }
+              placeholder="Customize the email body. Use placeholders like {{machineName}}, {{scheduledDate}}."
+              rows={6}
+              data-testid="textarea-planner-template"
+            />
+            <p className="text-xs text-muted-foreground">
+              Supported placeholders: {{machineName}}, {{machineCode}}, {{machineCodeFormatted}}, {{lineName}}, {{scheduledDate}}, {{maintenanceFrequency}}, {{notes}}, {{completedDate}}.
+            </p>
+          </div>
 
           <div className="space-y-2 md:col-span-2">
             <Label htmlFor="planner-notes">Notes</Label>
             <Textarea
               id="planner-notes"
*** End Patch
*** Begin Patch
*** Update File: client/src/pages/MaintenancePlanner.tsx
@@
-              <TableHead>Status</TableHead>
-              <TableHead>Frequency</TableHead>
-              <TableHead>Notes</TableHead>
+              <TableHead>Status</TableHead>
+              <TableHead>Frequency</TableHead>
+              <TableHead>Recipients</TableHead>
+              <TableHead>Notes</TableHead>
@@
-                  <TableCell>{schedule.maintenanceFrequency || "-"}</TableCell>
+                  <TableCell>{schedule.maintenanceFrequency || "-"}</TableCell>
+                  <TableCell className="max-w-[200px] whitespace-pre-wrap">
+                    {schedule.emailRecipients?.length
+                      ? schedule.emailRecipients
+                      : "Default recipients"}
+                  </TableCell>
*** End Patch
*** Begin Patch
*** Begin Patch
*** Update File: server/maintenance-scheduler.ts
@@
-    await sendMaintenanceEmail({
-      subject: `Maintenance Reminder: ${schedule.machineName} (${schedule.machineCode || "No Code"})`,
-      html: renderTemplate(schedule.emailTemplate, DEFAULT_REMINDER_TEMPLATE, data),
-      recipients: parseRecipients(schedule.emailRecipients),
-    });
+    await sendMaintenanceEmail({
+      subject: `Maintenance Reminder: ${schedule.machineName} (${schedule.machineCode || "No Code"})`,
+      html: renderTemplate(schedule.emailTemplate, DEFAULT_REMINDER_TEMPLATE, data),
+      recipients: parseRecipients(schedule.emailRecipients),
+    });
@@
-  await sendMaintenanceEmail({
-    subject: `Maintenance Completed: ${schedule.machineName} (${schedule.machineCode || "No Code"})`,
-    html: renderTemplate(schedule.emailTemplate, DEFAULT_COMPLETION_TEMPLATE, data),
-    recipients: parseRecipients(schedule.emailRecipients),
-  });
+  await sendMaintenanceEmail({
+    subject: `Maintenance Completed: ${schedule.machineName} (${schedule.machineCode || "No Code"})`,
+    html: renderTemplate(schedule.emailTemplate, DEFAULT_COMPLETION_TEMPLATE, data),
+    recipients: parseRecipients(schedule.emailRecipients),
+  });
*** End Patch
*** Begin Patch
*** Update File: server/backup-to-sql.ts
@@
-    const machinesData = await db.select().from(machines);
+    const machinesData = await db.select().from(machines);
@@
-      for (const machine of machinesData) {
-        sql += `INSERT INTO machines (id, name, line_id, sub_line_id, type) VALUES (${formatValue(machine.id)}, ${formatValue(machine.name)}, ${formatValue(machine.lineId)}, ${formatValue(machine.subLineId)}, ${formatValue(machine.type)});
`;
+      for (const machine of machinesData) {
+        sql += `INSERT INTO machines (id, name, code, line_id, sub_line_id, type, maintenance_frequency) VALUES (${formatValue(machine.id)}, ${formatValue(machine.name)}, ${formatValue(machine.code)}, ${formatValue(machine.lineId)}, ${formatValue(machine.subLineId)}, ${formatValue(machine.type)}, ${formatValue(machine.maintenanceFrequency)});
`;
       }
     }
@@
-      for (const breakdown of breakdownsData) {
-        sql += `INSERT INTO breakdowns (id, date, shift, line_id, sub_line_id, machine_id, problem_type_id, problem_description, start_time, end_time, total_time, attendees, closer, status, priority, capa_required, capa_data, five_why_analysis, root_causes, preventive_actions, prepared_by, approved_by, target_date, completion_date, evidence_before, evidence_after) VALUES (${formatValue(breakdown.id)}, ${formatValue(breakdown.date)}, ${formatValue(breakdown.shift)}, ${formatValue(breakdown.lineId)}, ${formatValue(breakdown.subLineId)}, ${formatValue(breakdown.machineId)}, ${formatValue(breakdown.problemTypeId)}, ${formatValue(breakdown.problemDescription)}, ${formatValue(breakdown.startTime)}, ${formatValue(breakdown.endTime)}, ${formatValue(breakdown.totalTime)}, ${formatValue(breakdown.attendees)}, ${formatValue(breakdown.closer)}, ${formatValue(breakdown.status)}, ${formatValue(breakdown.priority)}, ${formatValue(breakdown.capaRequired)}, ${formatValue(breakdown.capaData)}, ${formatValue(breakdown.fiveWhyAnalysis)}, ${formatValue(breakdown.rootCauses)}, ${formatValue(breakdown.preventiveActions)}, ${formatValue(breakdown.preparedBy)}, ${formatValue(breakdown.approvedBy)}, ${formatValue(breakdown.targetDate)}, ${formatValue(breakdown.completionDate)}, ${formatValue(breakdown.evidenceBefore)}, ${formatValue(breakdown.evidenceAfter)});
`;
-      }
+      for (const breakdown of breakdownsData) {
+        sql += `INSERT INTO breakdowns (
+          id,
+          date,
+          shift,
+          line_id,
+          sub_line_id,
+          machine_id,
+          problem_type_id,
+          priority,
+          action_taken,
+          root_cause,
+          start_time,
+          finish_time,
+          total_minutes,
+          major_contribution,
+          major_contribution_time,
+          attend_by_id,
+          closed_by_id,
+          remark,
+          status,
+          capa_required,
+          capa_operator,
+          capa_maintenance,
+          capa_what_happened,
+          capa_failure_mode,
+          capa_sketch,
+          capa_problem_descriptions,
+          capa_root_causes,
+          capa_preventive_actions,
+          capa_prepared_by,
+          capa_checked_by,
+          capa_reviewed_by,
+          created_by_id,
+          created_at,
+          updated_at
+        ) VALUES (
+          ${formatValue(breakdown.id)},
+          ${formatValue(breakdown.date)},
+          ${formatValue(breakdown.shift)},
+          ${formatValue(breakdown.lineId)},
+          ${formatValue(breakdown.subLineId)},
+          ${formatValue(breakdown.machineId)},
+          ${formatValue(breakdown.problemTypeId)},
+          ${formatValue(breakdown.priority)},
+          ${formatValue(breakdown.actionTaken)},
+          ${formatValue(breakdown.rootCause)},
+          ${formatValue(breakdown.startTime)},
+          ${formatValue(breakdown.finishTime)},
+          ${formatValue(breakdown.totalMinutes)},
+          ${formatValue(breakdown.majorContribution)},
+          ${formatValue(breakdown.majorContributionTime)},
+          ${formatValue(breakdown.attendById)},
+          ${formatValue(breakdown.closedById)},
+          ${formatValue(breakdown.remark)},
+          ${formatValue(breakdown.status)},
+          ${formatValue(breakdown.capaRequired)},
+          ${formatValue(breakdown.capaOperator)},
+          ${formatValue(breakdown.capaMaintenance)},
+          ${formatValue(breakdown.capaWhatHappened)},
+          ${formatValue(breakdown.capaFailureMode)},
+          ${formatValue(breakdown.capaSketch)},
+          ${formatValue(breakdown.capaProblemDescriptions)},
+          ${formatValue(breakdown.capaRootCauses)},
+          ${formatValue(breakdown.capaPreventiveActions)},
+          ${formatValue(breakdown.capaPreparedBy)},
+          ${formatValue(breakdown.capaCheckedBy)},
+          ${formatValue(breakdown.capaReviewedBy)},
+          ${formatValue(breakdown.createdById)},
+          ${formatValue(breakdown.createdAt)},
+          ${formatValue(breakdown.updatedAt)}
+        );
+`;
+      }
*** End Patch
